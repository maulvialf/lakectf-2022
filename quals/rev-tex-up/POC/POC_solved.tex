\documentclass{minimal}
\usepackage{tikz}
\newcount\c
\newcount\e
\newcount\p 
\newcount\np
\newcount\prevp
\newcount\dataa
\newcount\datab
\newcount\datac
\newcount\datad
\newcount\adda
\newcount\addb
\newcount\addc
\newcount\addd
\newcount\resp
\newcount\temp
\newcount\ucount
\newcount\ua
\newcount\ub
\newcount\uc
\newcount\ud
\newcommand{\step}{	
	\ifodd\c
		\multiply\c 3
		\advance\c 1
	\else
		\divide\c 2
	\fi
}
\newcommand{\flag}{
	\char\dataa
	\char\datab
	\char\datac
	\char\datad
}
\newcommand{\verify}{
	\ifnum\p=\resp \else \errmessage \fi
	\ifnum\e>0 \errmessage \fi
	\ifnum\c=34 \else \errmessage \fi
}
\newcommand{\eval}{

	\multiply\p \np
	\ifnum\np=1
		\ifnum\ucount=0
			\ifnum\c=\ua
			\else
				\advance\e 1
			\fi
		\else
			\ifnum\ucount=1
				\ifnum\c=\ub
				\else
				\advance\e 1
				\fi
			\else
				\ifnum\ucount=2
					\ifnum\c=\uc
					\else
					\advance\e 1
					\fi
				\else
					\ifnum\ucount=3
						\ifnum\c=\ud
						\else
						\advance\e 1
						\fi
					\else
						\advance\e 1
					\fi
				\fi
			\fi
		\fi
		\advance\ucount 1
	\else
		\ifnum\np<\prevp
			\advance\e 1
		\else
		\fi
	\fi
	
	\advance\dataa \adda
	\advance\datab \addb
	\advance\datac \addc
	\advance\datad \addd
	\step

}

\newcommand{\prep}{
	\c=19
	\p=1
	\np=0
	\prevp=0
	\e=0
	\ucount=0
	\ua=44
	\ub=1000
	\uc=2000
	\ud=3067
	\resp=11550
	\dataa=0
	\datab=0
	\datac=0
	\datad=0
	\adda=0
	\addb=0
	\addc=0
	\addd=0
}



\newcommand{\texta}{
	\np=3
	\adda=16
	\addb=-32
	\addc=-1
	\addd=-22
}

\newcommand{\textd}{
	\np=13
	\adda=30
	\addb=-10
	\addc=-37
	\addd=2
}

\newcommand{\texte}{
	\np=27
	\adda=35
	\addb=-7
	\addc=9
	\addd=38
}

\newcommand{\textf}{
	\np=31
	\adda=-9
	\addb=-27
	\addc=-19
	\addd=-10
}

\newcommand{\textp}{
	\np=11
	\adda=-63
	\addb=163
	\addc=-78
	\addd=12
}

\newcommand{\textr}{
	\np=17
	\adda=20
	\addb=7
	\addc=7
	\addd=6
}

\newcommand{\texts}{
	\np=5
	\adda=45
	\addb=3
	\addc=54
	\addd=37
}

\newcommand{\textt}{
	\np=29
	\adda=35
	\addb=-7
	\addc=9
	\addd=38
}

\newcommand{\textu}{
	\np=7
	\adda=-32
	\addb=-26
	\addc=44
	\addd=15
}

\newcommand{\textw}{
	\np=2
	\adda=60
	\addb=-29
	\addc=-1
	\addd=-1
}

\newcommand{\textUnderscore}{
	\np=1
	\adda=-2
	\addb=-2
	\addc=-2
	\addd=-2
}

\begin{document}
	\prep
	
	%Work to be done
	%scribbled flag in the meantime
	\textw
	\eval
	
	\texta
	\eval
	
	\texts
	\eval
	
	\texts
	\eval
	
	\textUnderscore
	\eval
	
	\textu
	\eval
	
	\textp
	\eval
	
	\verify
	
	\flag
\end{document}